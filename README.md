# èœ‚é¸Ÿè‡ªåŠ¨åŒ–å¹³å° (Fengniao Automation Platform)

åŸºäºLaravel Duskçš„ä¼ä¸šçº§Webè‡ªåŠ¨åŒ–æµ‹è¯•å’Œä»»åŠ¡æ‰§è¡Œå¹³å°ï¼Œæä¾›å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘ã€å¤šæµè§ˆå™¨å¹¶å‘æ‰§è¡Œã€æ™ºèƒ½ç›‘æ§å‘Šè­¦ç­‰åŠŸèƒ½ã€‚

## ğŸš€ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ ä»»åŠ¡ç®¡ç†
- **å¯è§†åŒ–å·¥ä½œæµç¼–è¾‘å™¨**: æ‹–æ‹½å¼èŠ‚ç‚¹ç¼–è¾‘ï¼Œæ”¯æŒæ¡ä»¶åˆ†æ”¯å’Œå¾ªç¯
- **å¤šç§ä»»åŠ¡ç±»å‹**: æµè§ˆå™¨è‡ªåŠ¨åŒ–ã€APIæµ‹è¯•ã€æ•°æ®é‡‡é›†ç­‰
- **çµæ´»è°ƒåº¦ç³»ç»Ÿ**: æ”¯æŒCronè¡¨è¾¾å¼ã€ä¸€æ¬¡æ€§ä»»åŠ¡ã€æ‰‹åŠ¨è§¦å‘
- **ä»»åŠ¡ä¾èµ–ç®¡ç†**: æ”¯æŒä»»åŠ¡é—´çš„ä¾èµ–å…³ç³»å’Œæ•°æ®ä¼ é€’

### ğŸŒ æµè§ˆå™¨ç®¡ç†
- **æ™ºèƒ½æµè§ˆå™¨æ± **: è‡ªåŠ¨ç®¡ç†Chromeå®ä¾‹ï¼Œæ”¯æŒè´Ÿè½½å‡è¡¡
- **å¤šæ ‡ç­¾é¡µå¹¶å‘**: å•å®ä¾‹å¤šæ ‡ç­¾é¡µæ‰§è¡Œï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡
- **Cookieç®¡ç†**: è‡ªåŠ¨ä¿å­˜å’ŒåŒæ­¥Cookieï¼Œæ”¯æŒä¼šè¯ä¿æŒ
- **æˆªå›¾å’Œå½•åˆ¶**: è‡ªåŠ¨æˆªå›¾ã€è§†é¢‘å½•åˆ¶ï¼Œä¾¿äºè°ƒè¯•å’Œå®¡è®¡

### ğŸ“Š ç›‘æ§å‘Šè­¦
- **å®æ—¶æ€§èƒ½ç›‘æ§**: CPUã€å†…å­˜ã€ç£ç›˜ä½¿ç”¨ç‡ç›‘æ§
- **ä»»åŠ¡æ‰§è¡Œç»Ÿè®¡**: æˆåŠŸç‡ã€æ‰§è¡Œæ—¶é—´ã€é”™è¯¯åˆ†æ
- **å¤šæ¸ é“é€šçŸ¥**: é‚®ä»¶ã€é’‰é’‰ã€ä¼ä¸šå¾®ä¿¡ã€Slackç­‰
- **æ™ºèƒ½å‘Šè­¦**: åŸºäºé˜ˆå€¼å’Œè¶‹åŠ¿çš„æ™ºèƒ½å‘Šè­¦

### ğŸ” æƒé™ç®¡ç†
- **RBACæƒé™æ¨¡å‹**: åŸºäºè§’è‰²çš„è®¿é—®æ§åˆ¶
- **ç»†ç²’åº¦æƒé™**: æ¨¡å—çº§ã€æ“ä½œçº§æƒé™æ§åˆ¶
- **å®¡è®¡æ—¥å¿—**: å®Œæ•´çš„æ“ä½œå®¡è®¡å’Œè¿½è¸ª
- **å¤šç§Ÿæˆ·æ”¯æŒ**: æ”¯æŒå¤šç»„ç»‡ã€å¤šé¡¹ç›®éš”ç¦»

### ğŸ›  å¼€å‘å·¥å…·
- **è„šæœ¬è½¬æ¢å™¨**: JavaScript/Pythonè„šæœ¬è‡ªåŠ¨è½¬æ¢ä¸ºDuskä»£ç 
- **è°ƒè¯•æ¨¡å¼**: å¯è§†åŒ–è°ƒè¯•ã€å•æ­¥æ‰§è¡Œã€æ–­ç‚¹è°ƒè¯•
- **APIæ¥å£**: å®Œæ•´çš„RESTful APIï¼Œæ”¯æŒç¬¬ä¸‰æ–¹é›†æˆ
- **æ’ä»¶ç³»ç»Ÿ**: æ”¯æŒè‡ªå®šä¹‰æ’ä»¶æ‰©å±•åŠŸèƒ½

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

### æœ€ä½è¦æ±‚
- **æ“ä½œç³»ç»Ÿ**: Linux (Ubuntu 18.04+, CentOS 7+) / macOS 10.14+ / Windows 10+
- **PHP**: 8.2+
- **æ•°æ®åº“**: MySQL 8.0+ / PostgreSQL 13+
- **ç¼“å­˜**: Redis 6.0+
- **å†…å­˜**: 4GB+
- **ç£ç›˜**: 20GB+

### æ¨èé…ç½®
- **CPU**: 4æ ¸å¿ƒ+
- **å†…å­˜**: 8GB+
- **ç£ç›˜**: SSD 50GB+
- **ç½‘ç»œ**: 100Mbps+

### ä¾èµ–è½¯ä»¶
- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **Google Chrome**: æœ€æ–°ç¨³å®šç‰ˆ
- **Node.js**: 18.0+ (å¼€å‘ç¯å¢ƒ)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ä½¿ç”¨Dockeréƒ¨ç½²ï¼ˆæ¨èï¼‰

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-org/fengniao.git
cd fengniao
```

2. **é…ç½®ç¯å¢ƒ**
```bash
# å¤åˆ¶ç¯å¢ƒé…ç½®æ–‡ä»¶
cp .env.example .env

# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim .env
```

3. **ä¸€é”®éƒ¨ç½²**
```bash
# èµ‹äºˆæ‰§è¡Œæƒé™
chmod +x deploy.sh

# éƒ¨ç½²åˆ°ç”Ÿäº§ç¯å¢ƒ
./deploy.sh production --build --migrate --seed

# æˆ–éƒ¨ç½²åˆ°å¼€å‘ç¯å¢ƒ
./deploy.sh development --build --migrate
```

4. **è®¿é—®ç³»ç»Ÿ**
- Webç•Œé¢: http://localhost
- APIæ–‡æ¡£: http://localhost/api/documentation
- ç›‘æ§é¢æ¿: http://localhost:3000 (å¦‚æœå¯ç”¨)

### æ‰‹åŠ¨å®‰è£…

1. **å®‰è£…PHPä¾èµ–**
```bash
composer install --no-dev --optimize-autoloader
```

2. **å®‰è£…Node.jsä¾èµ–**
```bash
npm install
npm run build
```

3. **é…ç½®ç¯å¢ƒ**
```bash
cp .env.example .env
php artisan key:generate
```

4. **æ•°æ®åº“è¿ç§»**
```bash
php artisan migrate
php artisan permission:manage init --force
```

5. **å¯åŠ¨æœåŠ¡**
```bash
# å¯åŠ¨WebæœåŠ¡
php artisan serve

# å¯åŠ¨é˜Ÿåˆ—å·¥ä½œè¿›ç¨‹
php artisan queue:work

# å¯åŠ¨ä»»åŠ¡è°ƒåº¦å™¨
php artisan schedule:work
```

## ğŸ“– ä½¿ç”¨æŒ‡å—

### åˆ›å»ºç¬¬ä¸€ä¸ªä»»åŠ¡

1. **ç™»å½•ç³»ç»Ÿ**
   - é»˜è®¤ç®¡ç†å‘˜è´¦å·: admin@example.com
   - é»˜è®¤å¯†ç : password

2. **åˆ›å»ºä»»åŠ¡**
   ```bash
   # ä½¿ç”¨å‘½ä»¤è¡Œåˆ›å»º
   php artisan task:create "æˆ‘çš„ç¬¬ä¸€ä¸ªä»»åŠ¡" \
     --type=browser \
     --url="https://example.com" \
     --schedule="0 9 * * *"
   ```

3. **é…ç½®ä»»åŠ¡**
   - è®¿é—®Webç•Œé¢çš„ä»»åŠ¡ç®¡ç†é¡µé¢
   - ä½¿ç”¨å¯è§†åŒ–ç¼–è¾‘å™¨é…ç½®ä»»åŠ¡æµç¨‹
   - è®¾ç½®æ‰§è¡Œè®¡åˆ’å’Œé€šçŸ¥è§„åˆ™

4. **æ‰§è¡Œä»»åŠ¡**
   ```bash
   # æ‰‹åŠ¨æ‰§è¡Œ
   php artisan task:execute {task-id}
   
   # æŸ¥çœ‹æ‰§è¡Œç»“æœ
   php artisan task:status {task-id}
   ```

### å·¥ä½œæµç¼–è¾‘å™¨ä½¿ç”¨

1. **èŠ‚ç‚¹ç±»å‹**
   - **å¼€å§‹èŠ‚ç‚¹**: å·¥ä½œæµå…¥å£ç‚¹
   - **åŠ¨ä½œèŠ‚ç‚¹**: æ‰§è¡Œå…·ä½“æ“ä½œï¼ˆç‚¹å‡»ã€è¾“å…¥ã€æˆªå›¾ç­‰ï¼‰
   - **æ¡ä»¶èŠ‚ç‚¹**: æ¡ä»¶åˆ¤æ–­å’Œåˆ†æ”¯æ§åˆ¶
   - **ç»“æŸèŠ‚ç‚¹**: å·¥ä½œæµç»“æŸç‚¹

2. **è¿æ¥èŠ‚ç‚¹**
   - æ‹–æ‹½èŠ‚ç‚¹åˆ°ç”»å¸ƒ
   - è¿æ¥èŠ‚ç‚¹åˆ›å»ºæ‰§è¡Œæµç¨‹
   - é…ç½®èŠ‚ç‚¹å‚æ•°å’Œæ¡ä»¶

3. **è°ƒè¯•å·¥ä½œæµ**
   ```bash
   # å¯ç”¨è°ƒè¯•æ¨¡å¼
   php artisan workflow:execute workflow.json --debug
   
   # å•æ­¥æ‰§è¡Œ
   php artisan workflow:execute workflow.json --step-by-step
   ```

### æµè§ˆå™¨æ± ç®¡ç†

1. **æŸ¥çœ‹æµè§ˆå™¨çŠ¶æ€**
   ```bash
   php artisan browser:status
   ```

2. **ç®¡ç†æµè§ˆå™¨å®ä¾‹**
   ```bash
   # å¯åŠ¨æµè§ˆå™¨æ± 
   php artisan browser:start --instances=5
   
   # åœæ­¢æ‰€æœ‰å®ä¾‹
   php artisan browser:stop
   
   # é‡å¯å¼‚å¸¸å®ä¾‹
   php artisan browser:restart --unhealthy-only
   ```

3. **å¥åº·æ£€æŸ¥**
   ```bash
   php artisan browser:health-check
   ```

### ç›‘æ§å’Œå‘Šè­¦

1. **æŸ¥çœ‹ç³»ç»ŸçŠ¶æ€**
   ```bash
   php artisan monitor:performance --type=system
   ```

2. **é…ç½®é€šçŸ¥æ¸ é“**
   ```bash
   # æµ‹è¯•é‚®ä»¶é€šçŸ¥
   php artisan notification:test email
   
   # æµ‹è¯•é’‰é’‰é€šçŸ¥
   php artisan notification:test dingtalk
   ```

3. **ç³»ç»Ÿä¼˜åŒ–**
   ```bash
   # åˆ†æç³»ç»Ÿæ€§èƒ½
   php artisan system:optimize --analyze
   
   # è‡ªåŠ¨è°ƒä¼˜
   php artisan system:optimize --auto-tune
   ```

## ğŸ”§ é…ç½®è¯´æ˜

### ç¯å¢ƒå˜é‡é…ç½®

```env
# åº”ç”¨åŸºç¡€é…ç½®
APP_NAME="èœ‚é¸Ÿè‡ªåŠ¨åŒ–å¹³å°"
APP_ENV=production
APP_DEBUG=false
APP_URL=http://localhost

# æ•°æ®åº“é…ç½®
DB_CONNECTION=mysql
DB_HOST=mysql
DB_PORT=3306
DB_DATABASE=fengniao
DB_USERNAME=fengniao
DB_PASSWORD=fengniao_password

# Redisé…ç½®
REDIS_HOST=redis
REDIS_PASSWORD=null
REDIS_PORT=6379

# é˜Ÿåˆ—é…ç½®
QUEUE_CONNECTION=redis
QUEUE_FAILED_DRIVER=database

# ç¼“å­˜é…ç½®
CACHE_DRIVER=redis
SESSION_DRIVER=redis

# æµè§ˆå™¨é…ç½®
BROWSER_POOL_SIZE=5
BROWSER_MAX_TABS=3
BROWSER_TIMEOUT=300
BROWSER_HEADLESS=true

# é€šçŸ¥é…ç½®
NOTIFICATION_EMAIL_ENABLED=true
NOTIFICATION_EMAIL_TO=admin@example.com
NOTIFICATION_DINGTALK_ENABLED=false
NOTIFICATION_DINGTALK_WEBHOOK=

# ç›‘æ§é…ç½®
MONITORING_ENABLED=true
MONITORING_INTERVAL=60
PERFORMANCE_ALERT_CPU_THRESHOLD=80
PERFORMANCE_ALERT_MEMORY_THRESHOLD=85
```

## ğŸ”Œ APIæ–‡æ¡£

### è®¤è¯

æ‰€æœ‰APIè¯·æ±‚éœ€è¦åŒ…å«è®¤è¯ä»¤ç‰Œï¼š

```bash
curl -H "Authorization: Bearer YOUR_TOKEN" \
     -H "Content-Type: application/json" \
     http://localhost/api/v1/tasks
```

### ä¸»è¦æ¥å£

#### ä»»åŠ¡ç®¡ç†

```bash
# è·å–ä»»åŠ¡åˆ—è¡¨
GET /api/v1/tasks

# åˆ›å»ºä»»åŠ¡
POST /api/v1/tasks
{
    "name": "æµ‹è¯•ä»»åŠ¡",
    "type": "browser",
    "config": {
        "url": "https://example.com",
        "actions": [...]
    },
    "schedule": "0 9 * * *"
}

# æ‰§è¡Œä»»åŠ¡
POST /api/v1/tasks/{id}/execute

# è·å–æ‰§è¡Œç»“æœ
GET /api/v1/tasks/{id}/executions
```

#### æµè§ˆå™¨ç®¡ç†

```bash
# è·å–æµè§ˆå™¨çŠ¶æ€
GET /api/v1/browsers/status

# é‡å¯æµè§ˆå™¨å®ä¾‹
POST /api/v1/browsers/{id}/restart
```

#### ç›‘æ§æ•°æ®

```bash
# è·å–ç³»ç»Ÿç›‘æ§æ•°æ®
GET /api/v1/monitoring/system

# è·å–ä»»åŠ¡ç»Ÿè®¡
GET /api/v1/monitoring/tasks
```

## ğŸ§ª æµ‹è¯•

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
php artisan test

# è¿è¡Œç‰¹å®šæµ‹è¯•å¥—ä»¶
php artisan test --testsuite=Feature
php artisan test --testsuite=Unit
php artisan test --testsuite=Integration

# è¿è¡Œç‰¹å®šæµ‹è¯•
php artisan test tests/Feature/TaskExecutionTest.php

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
php artisan test --coverage-html coverage
```

### é›†æˆæµ‹è¯•

```bash
# è¿è¡Œé›†æˆæµ‹è¯•
php artisan test tests/Integration/

# æµ‹è¯•æµè§ˆå™¨åŠŸèƒ½
php artisan test tests/Integration/BrowserTest.php

# æµ‹è¯•ä»»åŠ¡æ‰§è¡Œæµç¨‹
php artisan test tests/Integration/TaskExecutionFlowTest.php
```

### æ€§èƒ½æµ‹è¯•

```bash
# è¿è¡Œæ€§èƒ½æµ‹è¯•
php artisan test tests/Performance/

# å¹¶å‘æ‰§è¡Œæµ‹è¯•
php artisan test tests/Integration/ConcurrentExecutionTest.php
```

## ğŸ“ æ”¯æŒä¸åé¦ˆ

### è·å–å¸®åŠ©

- **æ–‡æ¡£**: [https://docs.fengniao.com](https://docs.fengniao.com)
- **GitHub Issues**: [https://github.com/your-org/fengniao/issues](https://github.com/your-org/fengniao/issues)
- **è®¨è®ºåŒº**: [https://github.com/your-org/fengniao/discussions](https://github.com/your-org/fengniao/discussions)
- **é‚®ä»¶æ”¯æŒ**: support@fengniao.com

### ç¤¾åŒº

- **QQç¾¤**: 123456789
- **å¾®ä¿¡ç¾¤**: æ‰«æäºŒç»´ç åŠ å…¥
- **Slack**: [fengniao.slack.com](https://fengniao.slack.com)

### å•†ä¸šæ”¯æŒ

å¦‚éœ€å•†ä¸šæ”¯æŒã€å®šåˆ¶å¼€å‘æˆ–ä¼ä¸šåŸ¹è®­ï¼Œè¯·è”ç³»ï¼š
- **é‚®ç®±**: business@fengniao.com
- **ç”µè¯**: +86-400-xxx-xxxx

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MIT License](LICENSE) å¼€æºåè®®ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œè´¡çŒ®è€…ï¼š

- [Laravel](https://laravel.com) - ä¼˜ç§€çš„PHPæ¡†æ¶
- [Laravel Dusk](https://laravel.com/docs/dusk) - æµè§ˆå™¨è‡ªåŠ¨åŒ–æµ‹è¯•å·¥å…·
- [Vue.js](https://vuejs.org) - æ¸è¿›å¼JavaScriptæ¡†æ¶
- [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) - æµè§ˆå™¨è°ƒè¯•åè®®

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰ä¸ºé¡¹ç›®è´¡çŒ®ä»£ç ã€æ–‡æ¡£å’Œå»ºè®®çš„å¼€å‘è€…ä»¬ï¼

---

<p align="center">
  <strong>èœ‚é¸Ÿè‡ªåŠ¨åŒ–å¹³å° - è®©è‡ªåŠ¨åŒ–æµ‹è¯•æ›´ç®€å•ã€æ›´é«˜æ•ˆ</strong>
</p>
